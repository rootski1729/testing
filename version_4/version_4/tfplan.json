{"format_version":"1.2","terraform_version":"1.13.1","variables":{"acm_certificate_arn":{"value":null},"api_container_image":{"value":"123456789012.dkr.ecr.us-east-1.amazonaws.com/caliber-api@sha256:abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"},"aws_region":{"value":"us-east-1"},"client_name":{"value":"APS"},"env":{"value":"prod"},"frontend_bucket_name":{"value":null},"plan":{"value":"Dedicated"},"saas_api_lb_dns_name":{"value":null},"saas_api_lb_zone_id":{"value":null},"saas_documentdb_uri":{"value":null},"saas_rds_endpoint":{"value":null},"subdomain":{"value":"aps"},"tags":{"value":{}}},"planned_values":{"outputs":{"api_endpoint":{"sensitive":false},"documentdb_uri":{"sensitive":true},"frontend_distribution_id":{"sensitive":false},"frontend_url":{"sensitive":false},"hosted_zone_id":{"sensitive":false,"type":"string","value":"Z03235813E2GH4P0BA0ZY"},"postgresql_endpoint":{"sensitive":true}},"root_module":{"resources":[{"address":"aws_route53_record.api","mode":"managed","type":"aws_route53_record","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[{"evaluate_target_health":true}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"api-aps.hicaliber.net","records":null,"set_identifier":null,"timeouts":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"sensitive_values":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}},{"address":"aws_route53_record.frontend","mode":"managed","type":"aws_route53_record","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"aps.hicaliber.net","set_identifier":null,"timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}},{"address":"aws_secretsmanager_secret.docdb","mode":"managed","type":"aws_secretsmanager_secret","name":"docdb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"DocumentDB credentials for APS-prod","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"aps-prod-docdb-credentials","recovery_window_in_days":30,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"replica":[],"tags":{},"tags_all":{}}},{"address":"aws_secretsmanager_secret.rds","mode":"managed","type":"aws_secretsmanager_secret","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"RDS PostgreSQL credentials for APS-prod","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"aps-prod-rds-credentials","recovery_window_in_days":30,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"replica":[],"tags":{},"tags_all":{}}},{"address":"aws_secretsmanager_secret_version.docdb","mode":"managed","type":"aws_secretsmanager_secret_version","name":"docdb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}},{"address":"aws_secretsmanager_secret_version.rds","mode":"managed","type":"aws_secretsmanager_secret_version","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}},{"address":"aws_security_group_rule.alb_to_ecs[0]","mode":"managed","type":"aws_security_group_rule","name":"alb_to_ecs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Allow ALB to communicate with ECS tasks on container port","from_port":8000,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":8000,"type":"egress"},"sensitive_values":{}},{"address":"random_integer.cidr","mode":"managed","type":"random_integer","name":"cidr","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"keepers":null,"max":250,"min":1,"seed":null},"sensitive_values":{}},{"address":"random_password.docdb","mode":"managed","type":"random_password","name":"docdb","provider_name":"registry.terraform.io/hashicorp/random","schema_version":3,"values":{"keepers":null,"length":20,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"sensitive_values":{"bcrypt_hash":true,"result":true}},{"address":"random_password.rds","mode":"managed","type":"random_password","name":"rds","provider_name":"registry.terraform.io/hashicorp/random","schema_version":3,"values":{"keepers":null,"length":20,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"sensitive_values":{"bcrypt_hash":true,"result":true}},{"address":"random_string.bucket_suffix","mode":"managed","type":"random_string","name":"bucket_suffix","provider_name":"registry.terraform.io/hashicorp/random","schema_version":2,"values":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.alb[0].aws_acm_certificate.this[0]","mode":"managed","type":"aws_acm_certificate","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"api-aps.hicaliber.net","domain_validation_options":[{"domain_name":"api-aps.hicaliber.net"}],"early_renewal_duration":null,"private_key":null,"subject_alternative_names":["api-aps.hicaliber.net"],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"validation_method":"DNS","validation_option":[]},"sensitive_values":{"domain_validation_options":[{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]}},{"address":"module.alb[0].aws_acm_certificate_validation.this[0]","mode":"managed","type":"aws_acm_certificate_validation","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"timeouts":null},"sensitive_values":{"validation_record_fqdns":[]}},{"address":"module.alb[0].aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"aps-prod-dedicated-api","preserve_host_header":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}},{"address":"module.alb[0].aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags_all":{}}},{"address":"module.alb[0].aws_lb_listener.https","mode":"managed","type":"aws_lb_listener","name":"https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-TLS-1-2-2017-01","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}},{"address":"module.alb[0].aws_lb_target_group.this","mode":"managed","type":"aws_lb_target_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/healthz","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"aps-prod-dedicated-api-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"target_type":"ip"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}},{"address":"module.alb[0].aws_route53_record.cert_validation[\"api-aps.hicaliber.net\"]","mode":"managed","type":"aws_route53_record","name":"cert_validation","index":"api-aps.hicaliber.net","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"timeouts":null,"ttl":300,"weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}},{"address":"module.alb[0].aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow HTTP/HTTPS access to the ALB","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"aps-prod-dedicated-api-alb-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-api-alb-sg","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-api-alb-sg","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.alb[0]"},{"resources":[{"address":"module.compute[0].aws_appautoscaling_policy.cpu_scaling","mode":"managed","type":"aws_appautoscaling_policy","name":"cpu_scaling","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"aps-prod-dedicated-cluster-cpu-scaling","policy_type":"TargetTrackingScaling","resource_id":"service/aps-prod-dedicated-cluster/aps-prod-dedicated-cluster-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"sensitive_values":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}},{"address":"module.compute[0].aws_appautoscaling_policy.memory_scaling","mode":"managed","type":"aws_appautoscaling_policy","name":"memory_scaling","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"aps-prod-dedicated-cluster-memory-scaling","policy_type":"TargetTrackingScaling","resource_id":"service/aps-prod-dedicated-cluster/aps-prod-dedicated-cluster-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageMemoryUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":80}]},"sensitive_values":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}},{"address":"module.compute[0].aws_appautoscaling_target.ecs_target","mode":"managed","type":"aws_appautoscaling_target","name":"ecs_target","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"max_capacity":3,"min_capacity":1,"resource_id":"service/aps-prod-dedicated-cluster/aps-prod-dedicated-cluster-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null},"sensitive_values":{"suspended_state":[],"tags_all":{}}},{"address":"module.compute[0].aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/ecs/aps-prod-dedicated-cluster","retention_in_days":30,"skip_destroy":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.compute[0].aws_ecs_cluster.this","mode":"managed","type":"aws_ecs_cluster","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"configuration":[],"name":"aps-prod-dedicated-cluster","service_connect_defaults":[],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[],"tags":{},"tags_all":{}}},{"address":"module.compute[0].aws_ecs_service.this","mode":"managed","type":"aws_ecs_service","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":50,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"api","container_port":8000,"elb_name":""}],"name":"aps-prod-dedicated-cluster-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":"SERVICE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"module.compute[0].aws_ecs_task_definition.this","mode":"managed","type":"aws_ecs_task_definition","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"cpu":"512","ephemeral_storage":[],"family":"aps-prod-dedicated-cluster","inference_accelerator":[],"ipc_mode":null,"memory":"1024","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}},{"address":"module.compute[0].aws_iam_role.exec","mode":"managed","type":"aws_iam_role","name":"exec","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"aps-prod-dedicated-cluster-exec-role","path":"/","permissions_boundary":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.compute[0].aws_iam_role.task","mode":"managed","type":"aws_iam_role","name":"task","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"aps-prod-dedicated-cluster-task-role","path":"/","permissions_boundary":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.compute[0].aws_iam_role_policy.secrets_policy","mode":"managed","type":"aws_iam_role_policy","name":"secrets_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"aps-prod-dedicated-cluster-exec-role-secrets"},"sensitive_values":{}},{"address":"module.compute[0].aws_iam_role_policy_attachment.exec_default","mode":"managed","type":"aws_iam_role_policy_attachment","name":"exec_default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"aps-prod-dedicated-cluster-exec-role"},"sensitive_values":{}},{"address":"module.compute[0].aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow inbound traffic from ALB only","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":1024,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":65535},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":53,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":53},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":53,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"udp","security_groups":[],"self":false,"to_port":53},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"ingress":[{"cidr_blocks":[],"description":"","from_port":8000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":8000}],"name":"aps-prod-dedicated-cluster-svc-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.compute[0]"},{"resources":[{"address":"module.docdb[0].aws_docdb_cluster.this","mode":"managed","type":"aws_docdb_cluster","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_major_version_upgrade":null,"apply_immediately":true,"backup_retention_period":30,"cluster_identifier":"aps-prod-dedicated-docdb","db_cluster_parameter_group_name":"aps-prod-dedicated-docdb-params","db_subnet_group_name":"aps-prod-dedicated-docdb-subnet-group","deletion_protection":true,"enabled_cloudwatch_logs_exports":["audit","profiler"],"engine":"docdb","final_snapshot_identifier":null,"global_cluster_identifier":null,"manage_master_user_password":null,"master_password_wo":null,"master_password_wo_version":null,"master_username":"admin","port":27017,"preferred_backup_window":"02:00-03:00","restore_to_point_in_time":[],"skip_final_snapshot":false,"snapshot_identifier":null,"storage_encrypted":true,"storage_type":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"availability_zones":[],"cluster_members":[],"enabled_cloudwatch_logs_exports":[false,false],"master_password":true,"master_user_secret":[],"restore_to_point_in_time":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.docdb[0].aws_docdb_cluster_instance.this[0]","mode":"managed","type":"aws_docdb_cluster_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"apply_immediately":true,"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":null,"enable_performance_insights":null,"engine":"docdb","identifier":"aps-prod-dedicated-docdb-0","instance_class":"db.t4g.medium","promotion_tier":0,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-instance-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-instance-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.docdb[0].aws_docdb_cluster_parameter_group.this","mode":"managed","type":"aws_docdb_cluster_parameter_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","family":"docdb5.0","name":"aps-prod-dedicated-docdb-params","parameter":[{"apply_method":"pending-reboot","name":"tls","value":"enabled"}],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-params","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-params","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"parameter":[{}],"tags":{},"tags_all":{}}},{"address":"module.docdb[0].aws_docdb_subnet_group.this","mode":"managed","type":"aws_docdb_subnet_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"aps-prod-dedicated-docdb-subnet-group","tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-subnet-group","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-subnet-group","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.docdb[0].aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow DocumentDB access from ECS services only","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"","from_port":27017,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":27017}],"name":"aps-prod-dedicated-docdb-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-sg","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-sg","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.docdb[0]"},{"resources":[{"address":"module.frontend.aws_acm_certificate.frontend[0]","mode":"managed","type":"aws_acm_certificate","name":"frontend","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"aps.hicaliber.net","domain_validation_options":[{"domain_name":"aps.hicaliber.net"}],"early_renewal_duration":null,"private_key":null,"subject_alternative_names":["aps.hicaliber.net"],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"validation_method":"DNS","validation_option":[]},"sensitive_values":{"domain_validation_options":[{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]}},{"address":"module.frontend.aws_acm_certificate_validation.frontend[0]","mode":"managed","type":"aws_acm_certificate_validation","name":"frontend","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"timeouts":null},"sensitive_values":{"validation_record_fqdns":[]}},{"address":"module.frontend.aws_cloudfront_distribution.this","mode":"managed","type":"aws_cloudfront_distribution","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":["aps.hicaliber.net"],"comment":null,"custom_error_response":[{"error_caching_min_ttl":null,"error_code":403,"response_code":200,"response_page_path":"/index.html"},{"error_caching_min_ttl":null,"error_code":404,"response_code":200,"response_page_path":"/index.html"}],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"658327ea-f89d-4fab-a63d-7e88639e58f6","cached_methods":["GET","HEAD"],"compress":true,"field_level_encryption_id":null,"forwarded_values":[],"function_association":[],"lambda_function_association":[],"min_ttl":0,"origin_request_policy_id":null,"realtime_log_config_arn":null,"response_headers_policy_id":null,"smooth_streaming":null,"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","enabled":true,"http_version":"http2","is_ipv6_enabled":true,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"viewer_certificate":[{"cloudfront_default_certificate":null,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1.2_2021","ssl_support_method":"sni-only"}],"wait_for_deployment":true,"web_acl_id":null},"sensitive_values":{"aliases":[false],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}]}},{"address":"module.frontend.aws_cloudfront_origin_access_control.this","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"sensitive_values":{}},{"address":"module.frontend.aws_route53_record.frontend_cert_validation[\"aps.hicaliber.net\"]","mode":"managed","type":"aws_route53_record","name":"frontend_cert_validation","index":"aps.hicaliber.net","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"timeouts":null,"ttl":300,"weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"sensitive_values":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}},{"address":"module.frontend.aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":true,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"module.frontend.aws_s3_bucket_policy.this","mode":"managed","type":"aws_s3_bucket_policy","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"module.frontend.aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"module.frontend.data.aws_iam_policy_document.s3_policy","mode":"data","type":"aws_iam_policy_document","name":"s3_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetObject"],"condition":[{"test":"StringEquals","values":[null],"variable":"AWS:SourceArn"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["cloudfront.amazonaws.com"],"type":"Service"}],"resources":[null],"sid":"AllowCloudFrontServicePrincipal"}],"version":null},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}}],"address":"module.frontend"},{"resources":[{"address":"module.network.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-eip-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-eip-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.network.aws_internet_gateway.igw[0]","mode":"managed","type":"aws_internet_gateway","name":"igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-igw","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-igw","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.network.aws_nat_gateway.nat[0]","mode":"managed","type":"aws_nat_gateway","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.network.aws_route.private_nat[0]","mode":"managed","type":"aws_route","name":"private_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.network.aws_route.private_nat[1]","mode":"managed","type":"aws_route","name":"private_nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.network.aws_route.public_internet[0]","mode":"managed","type":"aws_route","name":"public_internet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.network.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-rt-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-rt-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.network.aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-rt","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-rt","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.network.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.network.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.network.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.network.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.network.aws_security_group.endpoints[0]","mode":"managed","type":"aws_security_group","name":"endpoints","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for VPC interface endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"aps-prod-dedicated-endpoints-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.network.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-0","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-0","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.network.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-1","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-1","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.network.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-0","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-0","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.network.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-1","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-1","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.network.aws_vpc.this[0]","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.network.aws_vpc_endpoint.interface[0]","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ecr.api","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.api-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.api-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.network.aws_vpc_endpoint.interface[1]","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ecr.dkr","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.dkr-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.dkr-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.network.aws_vpc_endpoint.interface[2]","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.logs","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-logs-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-logs-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.network.aws_vpc_endpoint.interface[3]","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":3,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.secretsmanager","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-secretsmanager-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-secretsmanager-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.network.aws_vpc_endpoint.s3[0]","mode":"managed","type":"aws_vpc_endpoint","name":"s3","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.s3","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-s3-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-s3-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}],"address":"module.network"},{"resources":[{"address":"module.rds[0].aws_db_instance.this","mode":"managed","type":"aws_db_instance","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":30,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"caliber_aps","db_subnet_group_name":"aps-prod-dedicated-postgres-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":true,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"postgres","engine_version":"15.4","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"aps-prod-dedicated-postgres","instance_class":"db.t4g.small","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"password_wo":null,"password_wo_version":null,"performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":false,"storage_encrypted":true,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"upgrade_storage_config":null,"username":"admin"},"sensitive_values":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.rds[0].aws_db_subnet_group.this","mode":"managed","type":"aws_db_subnet_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"aps-prod-dedicated-postgres-subnet-group","tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-subnet-group","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-subnet-group","Plan":"Dedicated","Project":"Caliber"}},"sensitive_values":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}},{"address":"module.rds[0].aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Allow Postgres access from ECS services only","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":5432}],"name":"aps-prod-dedicated-postgres-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-sg","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-sg","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.rds[0]"}]}},"resource_changes":[{"address":"aws_route53_record.api","mode":"managed","type":"aws_route53_record","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[{"evaluate_target_health":true}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"api-aps.hicaliber.net","records":null,"set_identifier":null,"timeouts":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"after_unknown":{"alias":[{"name":true,"zone_id":true}],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"id":true,"latency_routing_policy":[],"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}}},{"address":"aws_route53_record.frontend","mode":"managed","type":"aws_route53_record","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"aps.hicaliber.net","set_identifier":null,"timeouts":null,"ttl":300,"type":"CNAME","weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"after_unknown":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"id":true,"latency_routing_policy":[],"records":true,"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}}},{"address":"aws_secretsmanager_secret.docdb","mode":"managed","type":"aws_secretsmanager_secret","name":"docdb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"DocumentDB credentials for APS-prod","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"aps-prod-docdb-credentials","recovery_window_in_days":30,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy":true,"replica":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags":{},"tags_all":{}}}},{"address":"aws_secretsmanager_secret.rds","mode":"managed","type":"aws_secretsmanager_secret","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"RDS PostgreSQL credentials for APS-prod","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"aps-prod-rds-credentials","recovery_window_in_days":30,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy":true,"replica":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags":{},"tags_all":{}}}},{"address":"aws_secretsmanager_secret_version.docdb","mode":"managed","type":"aws_secretsmanager_secret_version","name":"docdb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"after_unknown":{"arn":true,"has_secret_string_wo":true,"id":true,"secret_id":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}}},{"address":"aws_secretsmanager_secret_version.rds","mode":"managed","type":"aws_secretsmanager_secret_version","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"after_unknown":{"arn":true,"has_secret_string_wo":true,"id":true,"secret_id":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}}},{"address":"aws_security_group_rule.alb_to_ecs[0]","mode":"managed","type":"aws_security_group_rule","name":"alb_to_ecs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Allow ALB to communicate with ECS tasks on container port","from_port":8000,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":8000,"type":"egress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"random_integer.cidr","mode":"managed","type":"random_integer","name":"cidr","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"max":250,"min":1,"seed":null},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"random_password.docdb","mode":"managed","type":"random_password","name":"docdb","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":20,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"after_unknown":{"bcrypt_hash":true,"id":true,"result":true},"before_sensitive":false,"after_sensitive":{"bcrypt_hash":true,"result":true}}},{"address":"random_password.rds","mode":"managed","type":"random_password","name":"rds","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":20,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"after_unknown":{"bcrypt_hash":true,"id":true,"result":true},"before_sensitive":false,"after_sensitive":{"bcrypt_hash":true,"result":true}}},{"address":"random_string.bucket_suffix","mode":"managed","type":"random_string","name":"bucket_suffix","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.alb[0].aws_acm_certificate.this[0]","module_address":"module.alb[0]","mode":"managed","type":"aws_acm_certificate","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"api-aps.hicaliber.net","domain_validation_options":[{"domain_name":"api-aps.hicaliber.net"}],"early_renewal_duration":null,"private_key":null,"subject_alternative_names":["api-aps.hicaliber.net"],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"validation_method":"DNS","validation_option":[]},"after_unknown":{"arn":true,"domain_validation_options":[{"resource_record_name":true,"resource_record_type":true,"resource_record_value":true}],"id":true,"key_algorithm":true,"not_after":true,"not_before":true,"options":true,"pending_renewal":true,"renewal_eligibility":true,"renewal_summary":true,"status":true,"subject_alternative_names":[false],"tags":{},"tags_all":{},"type":true,"validation_emails":true,"validation_option":[]},"before_sensitive":false,"after_sensitive":{"domain_validation_options":[{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]}}},{"address":"module.alb[0].aws_acm_certificate_validation.this[0]","module_address":"module.alb[0]","mode":"managed","type":"aws_acm_certificate_validation","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"certificate_arn":true,"id":true,"validation_record_fqdns":true},"before_sensitive":false,"after_sensitive":{"validation_record_fqdns":[]}}},{"address":"module.alb[0].aws_lb.this","module_address":"module.alb[0]","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"aps-prod-dedicated-api","preserve_host_header":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"ipam_pools":[],"minimum_load_balancer_capacity":[],"name_prefix":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"module.alb[0].aws_lb_listener.http","module_address":"module.alb[0]","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[{}]}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"ssl_policy":true,"tags_all":true,"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"module.alb[0].aws_lb_listener.https","module_address":"module.alb[0]","mode":"managed","type":"aws_lb_listener","name":"https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-TLS-1-2-2017-01","tags":null,"timeouts":null},"after_unknown":{"arn":true,"certificate_arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"tags_all":true,"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"module.alb[0].aws_lb_target_group.this","module_address":"module.alb[0]","mode":"managed","type":"aws_lb_target_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/healthz","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"aps-prod-dedicated-api-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"target_type":"ip"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":{},"tags_all":{},"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}},{"address":"module.alb[0].aws_route53_record.cert_validation[\"api-aps.hicaliber.net\"]","module_address":"module.alb[0]","mode":"managed","type":"aws_route53_record","name":"cert_validation","index":"api-aps.hicaliber.net","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"timeouts":null,"ttl":300,"weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"after_unknown":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"id":true,"latency_routing_policy":[],"name":true,"records":true,"type":true,"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}}},{"address":"module.alb[0].aws_security_group.this","module_address":"module.alb[0]","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow HTTP/HTTPS access to the ALB","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"name":"aps-prod-dedicated-api-alb-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-api-alb-sg","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-api-alb-sg","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.compute[0].aws_appautoscaling_policy.cpu_scaling","module_address":"module.compute[0]","mode":"managed","type":"aws_appautoscaling_policy","name":"cpu_scaling","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"aps-prod-dedicated-cluster-cpu-scaling","policy_type":"TargetTrackingScaling","resource_id":"service/aps-prod-dedicated-cluster/aps-prod-dedicated-cluster-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"after_unknown":{"alarm_arns":true,"arn":true,"id":true,"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"before_sensitive":false,"after_sensitive":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}}},{"address":"module.compute[0].aws_appautoscaling_policy.memory_scaling","module_address":"module.compute[0]","mode":"managed","type":"aws_appautoscaling_policy","name":"memory_scaling","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"aps-prod-dedicated-cluster-memory-scaling","policy_type":"TargetTrackingScaling","resource_id":"service/aps-prod-dedicated-cluster/aps-prod-dedicated-cluster-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageMemoryUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":80}]},"after_unknown":{"alarm_arns":true,"arn":true,"id":true,"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"before_sensitive":false,"after_sensitive":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}}},{"address":"module.compute[0].aws_appautoscaling_target.ecs_target","module_address":"module.compute[0]","mode":"managed","type":"aws_appautoscaling_target","name":"ecs_target","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"max_capacity":3,"min_capacity":1,"resource_id":"service/aps-prod-dedicated-cluster/aps-prod-dedicated-cluster-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null},"after_unknown":{"arn":true,"id":true,"role_arn":true,"suspended_state":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"suspended_state":[],"tags_all":{}}}},{"address":"module.compute[0].aws_cloudwatch_log_group.this","module_address":"module.compute[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/ecs/aps-prod-dedicated-cluster","retention_in_days":30,"skip_destroy":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.compute[0].aws_ecs_cluster.this","module_address":"module.compute[0]","mode":"managed","type":"aws_ecs_cluster","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"configuration":[],"name":"aps-prod-dedicated-cluster","service_connect_defaults":[],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"configuration":[],"id":true,"service_connect_defaults":[],"setting":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[],"tags":{},"tags_all":{}}}},{"address":"module.compute[0].aws_ecs_service.this","module_address":"module.compute[0]","mode":"managed","type":"aws_ecs_service","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":50,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"api","container_port":8000,"elb_name":""}],"name":"aps-prod-dedicated-cluster-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":"SERVICE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{"alarms":[],"capacity_provider_strategy":[],"cluster":true,"deployment_circuit_breaker":[],"deployment_controller":[{}],"iam_role":true,"id":true,"load_balancer":[{"target_group_arn":true}],"network_configuration":[{"security_groups":true,"subnets":true}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":true,"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":true,"triggers":true,"volume_configuration":[],"vpc_lattice_configurations":[]},"before_sensitive":false,"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"module.compute[0].aws_ecs_task_definition.this","module_address":"module.compute[0]","mode":"managed","type":"aws_ecs_task_definition","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cpu":"512","ephemeral_storage":[],"family":"aps-prod-dedicated-cluster","inference_accelerator":[],"ipc_mode":null,"memory":"1024","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"track_latest":false,"volume":[]},"after_unknown":{"arn":true,"arn_without_revision":true,"container_definitions":true,"enable_fault_injection":true,"ephemeral_storage":[],"execution_role_arn":true,"id":true,"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"runtime_platform":[],"tags":{},"tags_all":{},"task_role_arn":true,"volume":[]},"before_sensitive":false,"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}}},{"address":"module.compute[0].aws_iam_role.exec","module_address":"module.compute[0]","mode":"managed","type":"aws_iam_role","name":"exec","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"aps-prod-dedicated-cluster-exec-role","path":"/","permissions_boundary":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.compute[0].aws_iam_role.task","module_address":"module.compute[0]","mode":"managed","type":"aws_iam_role","name":"task","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"aps-prod-dedicated-cluster-task-role","path":"/","permissions_boundary":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.compute[0].aws_iam_role_policy.secrets_policy","module_address":"module.compute[0]","mode":"managed","type":"aws_iam_role_policy","name":"secrets_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"aps-prod-dedicated-cluster-exec-role-secrets"},"after_unknown":{"id":true,"name_prefix":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.compute[0].aws_iam_role_policy_attachment.exec_default","module_address":"module.compute[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"exec_default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"aps-prod-dedicated-cluster-exec-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.compute[0].aws_security_group.this","module_address":"module.compute[0]","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow inbound traffic from ALB only","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":1024,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":65535},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":53,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":53},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":53,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"udp","security_groups":[],"self":false,"to_port":53},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80}],"ingress":[{"cidr_blocks":[],"description":"","from_port":8000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":8000}],"name":"aps-prod-dedicated-cluster-svc-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.docdb[0].aws_docdb_cluster.this","module_address":"module.docdb[0]","mode":"managed","type":"aws_docdb_cluster","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allow_major_version_upgrade":null,"apply_immediately":true,"backup_retention_period":30,"cluster_identifier":"aps-prod-dedicated-docdb","db_cluster_parameter_group_name":"aps-prod-dedicated-docdb-params","db_subnet_group_name":"aps-prod-dedicated-docdb-subnet-group","deletion_protection":true,"enabled_cloudwatch_logs_exports":["audit","profiler"],"engine":"docdb","final_snapshot_identifier":null,"global_cluster_identifier":null,"manage_master_user_password":null,"master_password_wo":null,"master_password_wo_version":null,"master_username":"admin","port":27017,"preferred_backup_window":"02:00-03:00","restore_to_point_in_time":[],"skip_final_snapshot":false,"snapshot_identifier":null,"storage_encrypted":true,"storage_type":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"availability_zones":true,"cluster_identifier_prefix":true,"cluster_members":true,"cluster_resource_id":true,"enabled_cloudwatch_logs_exports":[false,false],"endpoint":true,"engine_version":true,"hosted_zone_id":true,"id":true,"kms_key_id":true,"master_password":true,"master_user_secret":true,"preferred_maintenance_window":true,"reader_endpoint":true,"restore_to_point_in_time":[],"tags":{},"tags_all":{},"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"availability_zones":[],"cluster_members":[],"enabled_cloudwatch_logs_exports":[false,false],"master_password":true,"master_user_secret":[],"restore_to_point_in_time":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.docdb[0].aws_docdb_cluster_instance.this[0]","module_address":"module.docdb[0]","mode":"managed","type":"aws_docdb_cluster_instance","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"apply_immediately":true,"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":null,"enable_performance_insights":null,"engine":"docdb","identifier":"aps-prod-dedicated-docdb-0","instance_class":"db.t4g.medium","promotion_tier":0,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-instance-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-instance-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone":true,"ca_cert_identifier":true,"cluster_identifier":true,"db_subnet_group_name":true,"dbi_resource_id":true,"endpoint":true,"engine_version":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"performance_insights_kms_key_id":true,"port":true,"preferred_backup_window":true,"preferred_maintenance_window":true,"publicly_accessible":true,"storage_encrypted":true,"tags":{},"tags_all":{},"writer":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.docdb[0].aws_docdb_cluster_parameter_group.this","module_address":"module.docdb[0]","mode":"managed","type":"aws_docdb_cluster_parameter_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","family":"docdb5.0","name":"aps-prod-dedicated-docdb-params","parameter":[{"apply_method":"pending-reboot","name":"tls","value":"enabled"}],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-params","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-params","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"parameter":[{}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"parameter":[{}],"tags":{},"tags_all":{}}}},{"address":"module.docdb[0].aws_docdb_subnet_group.this","module_address":"module.docdb[0]","mode":"managed","type":"aws_docdb_subnet_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"aps-prod-dedicated-docdb-subnet-group","tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-subnet-group","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-subnet-group","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.docdb[0].aws_security_group.this","module_address":"module.docdb[0]","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow DocumentDB access from ECS services only","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"","from_port":27017,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":27017}],"name":"aps-prod-dedicated-docdb-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-sg","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-docdb-sg","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.frontend.data.aws_iam_policy_document.s3_policy","module_address":"module.frontend","mode":"data","type":"aws_iam_policy_document","name":"s3_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetObject"],"condition":[{"test":"StringEquals","values":[null],"variable":"AWS:SourceArn"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["cloudfront.amazonaws.com"],"type":"Service"}],"resources":[null],"sid":"AllowCloudFrontServicePrincipal"}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false],"condition":[{"values":[true]}],"not_principals":[],"principals":[{"identifiers":[false]}],"resources":[true]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}},"action_reason":"read_because_config_unknown"},{"address":"module.frontend.aws_acm_certificate.frontend[0]","module_address":"module.frontend","mode":"managed","type":"aws_acm_certificate","name":"frontend","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"certificate_authority_arn":null,"certificate_body":null,"certificate_chain":null,"domain_name":"aps.hicaliber.net","domain_validation_options":[{"domain_name":"aps.hicaliber.net"}],"early_renewal_duration":null,"private_key":null,"subject_alternative_names":["aps.hicaliber.net"],"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"validation_method":"DNS","validation_option":[]},"after_unknown":{"arn":true,"domain_validation_options":[{"resource_record_name":true,"resource_record_type":true,"resource_record_value":true}],"id":true,"key_algorithm":true,"not_after":true,"not_before":true,"options":true,"pending_renewal":true,"renewal_eligibility":true,"renewal_summary":true,"status":true,"subject_alternative_names":[false],"tags":{},"tags_all":{},"type":true,"validation_emails":true,"validation_option":[]},"before_sensitive":false,"after_sensitive":{"domain_validation_options":[{}],"options":[],"private_key":true,"renewal_summary":[],"subject_alternative_names":[false],"tags":{},"tags_all":{},"validation_emails":[],"validation_option":[]}}},{"address":"module.frontend.aws_acm_certificate_validation.frontend[0]","module_address":"module.frontend","mode":"managed","type":"aws_acm_certificate_validation","name":"frontend","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"certificate_arn":true,"id":true,"validation_record_fqdns":true},"before_sensitive":false,"after_sensitive":{"validation_record_fqdns":[]}}},{"address":"module.frontend.aws_cloudfront_distribution.this","module_address":"module.frontend","mode":"managed","type":"aws_cloudfront_distribution","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"aliases":["aps.hicaliber.net"],"comment":null,"custom_error_response":[{"error_caching_min_ttl":null,"error_code":403,"response_code":200,"response_page_path":"/index.html"},{"error_caching_min_ttl":null,"error_code":404,"response_code":200,"response_page_path":"/index.html"}],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":"658327ea-f89d-4fab-a63d-7e88639e58f6","cached_methods":["GET","HEAD"],"compress":true,"field_level_encryption_id":null,"forwarded_values":[],"function_association":[],"lambda_function_association":[],"min_ttl":0,"origin_request_policy_id":null,"realtime_log_config_arn":null,"response_headers_policy_id":null,"smooth_streaming":null,"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","enabled":true,"http_version":"http2","is_ipv6_enabled":true,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"viewer_certificate":[{"cloudfront_default_certificate":null,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1.2_2021","ssl_support_method":"sni-only"}],"wait_for_deployment":true,"web_acl_id":null},"after_unknown":{"aliases":[false],"arn":true,"caller_reference":true,"continuous_deployment_policy_id":true,"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"default_ttl":true,"forwarded_values":[],"function_association":[],"grpc_config":true,"lambda_function_association":[],"max_ttl":true,"target_origin_id":true,"trusted_key_groups":true,"trusted_signers":true}],"domain_name":true,"etag":true,"hosted_zone_id":true,"id":true,"in_progress_validation_batches":true,"last_modified_time":true,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"domain_name":true,"origin_access_control_id":true,"origin_id":true,"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":true}]}],"status":true,"tags":{},"tags_all":{},"trusted_key_groups":true,"trusted_signers":true,"viewer_certificate":[{"acm_certificate_arn":true}]},"before_sensitive":false,"after_sensitive":{"aliases":[false],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[],"function_association":[],"grpc_config":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}]}}},{"address":"module.frontend.aws_cloudfront_origin_access_control.this","module_address":"module.frontend","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"after_unknown":{"arn":true,"description":true,"etag":true,"id":true,"name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.frontend.aws_route53_record.frontend_cert_validation[\"aps.hicaliber.net\"]","module_address":"module.frontend","mode":"managed","type":"aws_route53_record","name":"frontend_cert_validation","index":"aps.hicaliber.net","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"set_identifier":null,"timeouts":null,"ttl":300,"weighted_routing_policy":[],"zone_id":"Z03235813E2GH4P0BA0ZY"},"after_unknown":{"alias":[],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"id":true,"latency_routing_policy":[],"name":true,"records":true,"type":true,"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"geoproximity_routing_policy":[],"latency_routing_policy":[],"records":[],"weighted_routing_policy":[]}}},{"address":"module.frontend.aws_s3_bucket.this","module_address":"module.frontend","mode":"managed","type":"aws_s3_bucket","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":true,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags":{},"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.frontend.aws_s3_bucket_policy.this","module_address":"module.frontend","mode":"managed","type":"aws_s3_bucket_policy","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"bucket":true,"id":true,"policy":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.frontend.aws_s3_bucket_public_access_block.this","module_address":"module.frontend","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_eip.nat[0]","module_address":"module.network","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-eip-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-eip-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.network.aws_internet_gateway.igw[0]","module_address":"module.network","mode":"managed","type":"aws_internet_gateway","name":"igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-igw","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-igw","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.network.aws_nat_gateway.nat[0]","module_address":"module.network","mode":"managed","type":"aws_nat_gateway","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-nat-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_route.private_nat[0]","module_address":"module.network","mode":"managed","type":"aws_route","name":"private_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_route.private_nat[1]","module_address":"module.network","mode":"managed","type":"aws_route","name":"private_nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_route.public_internet[0]","module_address":"module.network","mode":"managed","type":"aws_route","name":"public_internet","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_route_table.private[0]","module_address":"module.network","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-rt-0","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-rt-0","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_route_table.public[0]","module_address":"module.network","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-rt","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-rt","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_route_table_association.private[0]","module_address":"module.network","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_route_table_association.private[1]","module_address":"module.network","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_route_table_association.public[0]","module_address":"module.network","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_route_table_association.public[1]","module_address":"module.network","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.aws_security_group.endpoints[0]","module_address":"module.network","mode":"managed","type":"aws_security_group","name":"endpoints","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for VPC interface endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"aps-prod-dedicated-endpoints-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":true,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_subnet.private[0]","module_address":"module.network","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-0","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-0","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"cidr_block":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.network.aws_subnet.private[1]","module_address":"module.network","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-1","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-private-1","Plan":"Dedicated","Project":"Caliber","Tier":"private"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"cidr_block":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.network.aws_subnet.public[0]","module_address":"module.network","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-0","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-0","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"cidr_block":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.network.aws_subnet.public[1]","module_address":"module.network","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-1","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-public-1","Plan":"Dedicated","Project":"Caliber","Tier":"public"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"cidr_block":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.network.aws_vpc.this[0]","module_address":"module.network","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"cidr_block":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.network.aws_vpc_endpoint.interface[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ecr.api","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.api-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.api-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_vpc_endpoint.interface[1]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ecr.dkr","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.dkr-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-ecr.dkr-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_vpc_endpoint.interface[2]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.logs","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-logs-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-logs-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_vpc_endpoint.interface[3]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint","name":"interface","index":3,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.secretsmanager","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-secretsmanager-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-secretsmanager-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.network.aws_vpc_endpoint.s3[0]","module_address":"module.network","mode":"managed","type":"aws_vpc_endpoint","name":"s3","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.s3","service_network_arn":null,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-s3-endpoint","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-s3-endpoint","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"private_dns_enabled":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.rds[0].aws_db_instance.this","module_address":"module.rds[0]","mode":"managed","type":"aws_db_instance","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":30,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"caliber_aps","db_subnet_group_name":"aps-prod-dedicated-postgres-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":true,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"postgres","engine_version":"15.4","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"aps-prod-dedicated-postgres","instance_class":"db.t4g.small","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"password_wo":null,"password_wo_version":null,"performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":false,"storage_encrypted":true,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres","Plan":"Dedicated","Project":"Caliber"},"timeouts":null,"upgrade_storage_config":null,"username":"admin"},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"backup_target":true,"backup_window":true,"blue_green_update":[],"ca_cert_identifier":true,"character_set_name":true,"database_insights_mode":true,"domain_fqdn":true,"endpoint":true,"engine_lifecycle_support":true,"engine_version_actual":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"iops":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"listener_endpoint":true,"maintenance_window":true,"master_user_secret":true,"master_user_secret_kms_key_id":true,"monitoring_role_arn":true,"nchar_character_set_name":true,"network_type":true,"option_group_name":true,"parameter_group_name":true,"password":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replica_mode":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"snapshot_identifier":true,"status":true,"storage_throughput":true,"storage_type":true,"tags":{},"tags_all":{},"timezone":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.rds[0].aws_db_subnet_group.this","module_address":"module.rds[0]","mode":"managed","type":"aws_db_subnet_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"aps-prod-dedicated-postgres-subnet-group","tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-subnet-group","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-subnet-group","Plan":"Dedicated","Project":"Caliber"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"supported_network_types":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}}},{"address":"module.rds[0].aws_security_group.this","module_address":"module.rds[0]","mode":"managed","type":"aws_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow Postgres access from ECS services only","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":5432}],"name":"aps-prod-dedicated-postgres-sg","revoke_rules_on_delete":false,"tags":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-sg","Plan":"Dedicated","Project":"Caliber"},"tags_all":{"Client":"APS","Env":"prod","ManagedBy":"Terraform","Name":"aps-prod-dedicated-postgres-sg","Plan":"Dedicated","Project":"Caliber"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}}],"output_changes":{"api_endpoint":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"documentdb_uri":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":true,"after_sensitive":true},"frontend_distribution_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"frontend_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"hosted_zone_id":{"actions":["create"],"before":null,"after":"Z03235813E2GH4P0BA0ZY","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"postgresql_endpoint":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":true,"after_sensitive":true}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.1","values":{"outputs":{"hosted_zone_id":{"sensitive":false,"value":"Z03235813E2GH4P0BA0ZY","type":"string"}},"root_module":{"resources":[{"address":"data.aws_route53_zone.primary","mode":"data","type":"aws_route53_zone","name":"primary","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::hostedzone/Z03235813E2GH4P0BA0ZY","caller_reference":"RISWorkflow-RD:35279b04-5b49-4e4e-8aff-d6e561e53503","comment":"HostedZone created by Route53 Registrar","id":"Z03235813E2GH4P0BA0ZY","linked_service_description":null,"linked_service_principal":null,"name":"hicaliber.net","name_servers":["ns-1547.awsdns-01.co.uk","ns-1432.awsdns-51.org","ns-472.awsdns-59.com","ns-706.awsdns-24.net"],"primary_name_server":"ns-1547.awsdns-01.co.uk","private_zone":false,"resource_record_set_count":20,"tags":{},"vpc_id":null,"zone_id":"Z03235813E2GH4P0BA0ZY"},"sensitive_values":{"name_servers":[false,false,false,false],"tags":{}}}],"child_modules":[{"resources":[{"address":"module.alb[0].data.aws_route53_zone.main","mode":"data","type":"aws_route53_zone","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::hostedzone/Z03235813E2GH4P0BA0ZY","caller_reference":"RISWorkflow-RD:35279b04-5b49-4e4e-8aff-d6e561e53503","comment":"HostedZone created by Route53 Registrar","id":"Z03235813E2GH4P0BA0ZY","linked_service_description":null,"linked_service_principal":null,"name":"hicaliber.net","name_servers":["ns-1547.awsdns-01.co.uk","ns-1432.awsdns-51.org","ns-472.awsdns-59.com","ns-706.awsdns-24.net"],"primary_name_server":"ns-1547.awsdns-01.co.uk","private_zone":false,"resource_record_set_count":20,"tags":{},"vpc_id":null,"zone_id":"Z03235813E2GH4P0BA0ZY"},"sensitive_values":{"name_servers":[false,false,false,false],"tags":{}}}],"address":"module.alb[0]"},{"resources":[{"address":"module.compute[0].data.aws_iam_policy_document.ecs_task_assume_role","mode":"data","type":"aws_iam_policy_document","name":"ecs_task_assume_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1077804475","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ecs-tasks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.compute[0].data.aws_iam_policy_document.logging","mode":"data","type":"aws_iam_policy_document","name":"logging","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3015117179","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\"],\"Resource\":\"*\"}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["logs:CreateLogStream","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"module.compute[0].data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}}],"address":"module.compute[0]"},{"resources":[{"address":"module.frontend.data.aws_route53_zone.main","mode":"data","type":"aws_route53_zone","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::hostedzone/Z03235813E2GH4P0BA0ZY","caller_reference":"RISWorkflow-RD:35279b04-5b49-4e4e-8aff-d6e561e53503","comment":"HostedZone created by Route53 Registrar","id":"Z03235813E2GH4P0BA0ZY","linked_service_description":null,"linked_service_principal":null,"name":"hicaliber.net","name_servers":["ns-1547.awsdns-01.co.uk","ns-1432.awsdns-51.org","ns-472.awsdns-59.com","ns-706.awsdns-24.net"],"primary_name_server":"ns-1547.awsdns-01.co.uk","private_zone":false,"resource_record_set_count":20,"tags":{},"vpc_id":null,"zone_id":"Z03235813E2GH4P0BA0ZY"},"sensitive_values":{"name_servers":[false,false,false,false],"tags":{}}}],"address":"module.frontend"},{"resources":[{"address":"module.network.data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1-zg-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":null,"timeouts":null,"zone_ids":["use1-az1","use1-az2","use1-az4","use1-az6","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"module.network.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}}],"address":"module.network"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"region":{"references":["var.aws_region"]}}},"aws.us_east_1":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","alias":"us_east_1","version_constraint":"~\u003e 5.0","expressions":{"region":{"constant_value":"us-east-1"}}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","version_constraint":"~\u003e 3.5"}},"root_module":{"outputs":{"api_endpoint":{"expression":{"references":["module.alb[0].lb_dns_name","module.alb[0]","var.saas_api_lb_dns_name"]},"description":"Public DNS name of the API load balancer.  For SaaS tenants this will return the provided shared load balancer."},"documentdb_uri":{"sensitive":true,"expression":{"references":["module.docdb[0].connection_uri","module.docdb[0]","var.saas_documentdb_uri"]},"description":"Connection string for Amazon DocumentDB. Includes required parameters for TLS, replica set, and disabled retryable writes."},"frontend_distribution_id":{"expression":{"references":["module.frontend.distribution_id","module.frontend"]},"description":"CloudFront distribution ID for the frontend, if CloudFront is used. Empty when using S3 website hosting."},"frontend_url":{"expression":{"references":["module.frontend.domain_name","module.frontend"]},"description":"URL of the deployed React frontend (either CloudFront distribution or direct S3 static site)."},"hosted_zone_id":{"expression":{"references":["data.aws_route53_zone.primary.zone_id","data.aws_route53_zone.primary"]},"description":"Route53 hosted zone ID used for DNS record creation."},"postgresql_endpoint":{"sensitive":true,"expression":{"references":["module.rds[0].endpoint","module.rds[0]","var.saas_rds_endpoint"]},"description":"Endpoint and port for the PostgreSQL instance."}},"resources":[{"address":"aws_route53_record.api","mode":"managed","type":"aws_route53_record","name":"api","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":true},"name":{"references":["local.create_compute","module.alb[0].lb_dns_name","module.alb[0]","var.saas_api_lb_dns_name"]},"zone_id":{"references":["local.create_compute","module.alb[0].lb_zone_id","module.alb[0]","var.saas_api_lb_zone_id"]}}],"name":{"references":["local.api_fqdn"]},"type":{"constant_value":"A"},"zone_id":{"references":["data.aws_route53_zone.primary.zone_id","data.aws_route53_zone.primary"]}},"schema_version":2,"depends_on":["module.alb"]},{"address":"aws_route53_record.frontend","mode":"managed","type":"aws_route53_record","name":"frontend","provider_config_key":"aws","expressions":{"name":{"references":["local.frontend_fqdn"]},"records":{"references":["module.frontend.domain_name","module.frontend"]},"ttl":{"constant_value":300},"type":{"constant_value":"CNAME"},"zone_id":{"references":["data.aws_route53_zone.primary.zone_id","data.aws_route53_zone.primary"]}},"schema_version":2},{"address":"aws_secretsmanager_secret.docdb","mode":"managed","type":"aws_secretsmanager_secret","name":"docdb","provider_config_key":"aws","expressions":{"description":{"references":["var.client_name","var.env"]},"name":{"references":["local.client_lower","var.env"]},"recovery_window_in_days":{"references":["local.is_prod"]},"tags":{"references":["local.base_tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret.rds","mode":"managed","type":"aws_secretsmanager_secret","name":"rds","provider_config_key":"aws","expressions":{"description":{"references":["var.client_name","var.env"]},"name":{"references":["local.client_lower","var.env"]},"recovery_window_in_days":{"references":["local.is_prod"]},"tags":{"references":["local.base_tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.docdb","mode":"managed","type":"aws_secretsmanager_secret_version","name":"docdb","provider_config_key":"aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.docdb.id","aws_secretsmanager_secret.docdb"]},"secret_string":{"references":["random_password.docdb.result","random_password.docdb"]}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.rds","mode":"managed","type":"aws_secretsmanager_secret_version","name":"rds","provider_config_key":"aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.rds.id","aws_secretsmanager_secret.rds"]},"secret_string":{"references":["random_password.rds.result","random_password.rds"]}},"schema_version":0},{"address":"aws_security_group_rule.alb_to_ecs","mode":"managed","type":"aws_security_group_rule","name":"alb_to_ecs","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow ALB to communicate with ECS tasks on container port"},"from_port":{"constant_value":8000},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["module.alb[0].security_group_id","module.alb[0]"]},"source_security_group_id":{"references":["module.compute[0].security_group_id","module.compute[0]"]},"to_port":{"constant_value":8000},"type":{"constant_value":"egress"}},"schema_version":2,"count_expression":{"references":["local.create_compute"]}},{"address":"random_integer.cidr","mode":"managed","type":"random_integer","name":"cidr","provider_config_key":"random","expressions":{"max":{"constant_value":250},"min":{"constant_value":1}},"schema_version":0},{"address":"random_password.docdb","mode":"managed","type":"random_password","name":"docdb","provider_config_key":"random","expressions":{"length":{"constant_value":20},"special":{"constant_value":true}},"schema_version":3},{"address":"random_password.rds","mode":"managed","type":"random_password","name":"rds","provider_config_key":"random","expressions":{"length":{"constant_value":20},"special":{"constant_value":true}},"schema_version":3},{"address":"random_string.bucket_suffix","mode":"managed","type":"random_string","name":"bucket_suffix","provider_config_key":"random","expressions":{"length":{"constant_value":8},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":2},{"address":"data.aws_route53_zone.primary","mode":"data","type":"aws_route53_zone","name":"primary","provider_config_key":"aws","expressions":{"name":{"constant_value":"hicaliber.net."},"private_zone":{"constant_value":false}},"schema_version":0}],"module_calls":{"alb":{"source":"./modules/alb","expressions":{"certificate_arn":{"references":["var.acm_certificate_arn"]},"domain_name":{"references":["local.api_fqdn"]},"name":{"references":["local.name_prefix"]},"subnets":{"references":["module.network.public_subnet_ids","module.network"]},"tags":{"references":["local.base_tags"]},"vpc_id":{"references":["module.network.vpc_id","module.network"]}},"count_expression":{"references":["local.create_compute"]},"module":{"outputs":{"lb_dns_name":{"expression":{"references":["aws_lb.this.dns_name","aws_lb.this"]}},"lb_zone_id":{"expression":{"references":["aws_lb.this.zone_id","aws_lb.this"]}},"security_group_id":{"expression":{"references":["aws_security_group.this.id","aws_security_group.this"]},"description":"Security group ID for the ALB"},"target_group_arn":{"expression":{"references":["aws_lb_target_group.this.arn","aws_lb_target_group.this"]}}},"resources":[{"address":"aws_acm_certificate.this","mode":"managed","type":"aws_acm_certificate","name":"this","provider_config_key":"aws","expressions":{"domain_name":{"references":["var.domain_name"]},"tags":{"references":["var.tags"]},"validation_method":{"constant_value":"DNS"}},"schema_version":0,"count_expression":{"references":["var.certificate_arn"]}},{"address":"aws_acm_certificate_validation.this","mode":"managed","type":"aws_acm_certificate_validation","name":"this","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["aws_acm_certificate.this[0].arn","aws_acm_certificate.this[0]","aws_acm_certificate.this"]},"validation_record_fqdns":{"references":["aws_route53_record.cert_validation"]}},"schema_version":0,"count_expression":{"references":["var.certificate_arn"]}},{"address":"aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_config_key":"aws","expressions":{"enable_deletion_protection":{"constant_value":false},"idle_timeout":{"constant_value":60},"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["var.name"]},"security_groups":{"references":["aws_security_group.this.id","aws_security_group.this"]},"subnets":{"references":["var.subnets"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_config_key":"aws","expressions":{"default_action":[{"redirect":[{"port":{"constant_value":"443"},"protocol":{"constant_value":"HTTPS"},"status_code":{"constant_value":"HTTP_301"}}],"type":{"constant_value":"redirect"}}],"load_balancer_arn":{"references":["aws_lb.this.arn","aws_lb.this"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_lb_listener.https","mode":"managed","type":"aws_lb_listener","name":"https","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["local.certificate_arn"]},"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.this.arn","aws_lb_target_group.this"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.this.arn","aws_lb.this"]},"port":{"constant_value":443},"protocol":{"constant_value":"HTTPS"},"ssl_policy":{"constant_value":"ELBSecurityPolicy-TLS-1-2-2017-01"}},"schema_version":0,"depends_on":["aws_acm_certificate_validation.this"]},{"address":"aws_lb_target_group.this","mode":"managed","type":"aws_lb_target_group","name":"this","provider_config_key":"aws","expressions":{"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"matcher":{"constant_value":"200"},"path":{"constant_value":"/healthz"},"port":{"constant_value":"traffic-port"},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":2}}],"name":{"references":["var.name"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"tags":{"references":["var.tags"]},"target_type":{"constant_value":"ip"},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"aws_route53_record.cert_validation","mode":"managed","type":"aws_route53_record","name":"cert_validation","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"records":{"references":["each.value.record","each.value"]},"ttl":{"constant_value":300},"type":{"references":["each.value.type","each.value"]},"zone_id":{"references":["data.aws_route53_zone.main.zone_id","data.aws_route53_zone.main"]}},"schema_version":2,"for_each_expression":{"references":["var.certificate_arn","aws_acm_certificate.this[0].domain_validation_options","aws_acm_certificate.this[0]","aws_acm_certificate.this"]}},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow HTTP/HTTPS access to the ALB"},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":443}]},"name":{"references":["var.name"]},"tags":{"references":["var.tags","var.name"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"data.aws_route53_zone.main","mode":"data","type":"aws_route53_zone","name":"main","provider_config_key":"aws","expressions":{"name":{"references":["var.domain_name","var.domain_name"]},"private_zone":{"constant_value":false}},"schema_version":0}],"variables":{"certificate_arn":{"default":null,"description":"ARN of ACM certificate for HTTPS. If not provided, will be created."},"domain_name":{"description":"Domain name for ACM certificate (e.g. api-aps.hicaliber.net)"},"name":{"description":"Name prefix for the load balancer."},"subnets":{"description":"List of public subnet IDs for ALB."},"tags":{"default":{},"description":"Tags to apply to all ALB resources."},"vpc_id":{"description":"VPC ID in which to deploy the ALB."}}}},"compute":{"source":"./modules/compute","expressions":{"alb_security_group_id":{"references":["local.create_compute","module.alb[0].security_group_id","module.alb[0]"]},"alb_target_group":{"references":["local.create_compute","module.alb[0].target_group_arn","module.alb[0]"]},"cluster_name":{"references":["local.name_prefix"]},"container_port":{"constant_value":8000},"desired_count":{"constant_value":1},"docdb_secret_arn":{"references":["local.create_docdb","aws_secretsmanager_secret.docdb.arn","aws_secretsmanager_secret.docdb"]},"documentdb_uri":{"references":["local.create_docdb","module.docdb[0].connection_uri","module.docdb[0]","var.saas_documentdb_uri"]},"image":{"references":["var.api_container_image"]},"rds_endpoint":{"references":["local.create_rds","module.rds[0].endpoint","module.rds[0]","var.saas_rds_endpoint"]},"rds_secret_arn":{"references":["local.create_rds","aws_secretsmanager_secret.rds.arn","aws_secretsmanager_secret.rds"]},"secrets_prefix":{"references":["local.client_lower","var.env"]},"subnets":{"references":["module.network.private_subnet_ids","module.network"]},"tags":{"references":["local.base_tags"]},"vpc_cidr":{"references":["module.network.vpc_cidr","module.network"]},"vpc_id":{"references":["module.network.vpc_id","module.network"]}},"count_expression":{"references":["local.create_compute"]},"module":{"outputs":{"cluster_id":{"expression":{"references":["aws_ecs_cluster.this.id","aws_ecs_cluster.this"]}},"security_group_id":{"expression":{"references":["aws_security_group.this.id","aws_security_group.this"]},"description":"Security group ID for the ECS service"},"service_name":{"expression":{"references":["aws_ecs_service.this.name","aws_ecs_service.this"]}}},"resources":[{"address":"aws_appautoscaling_policy.cpu_scaling","mode":"managed","type":"aws_appautoscaling_policy","name":"cpu_scaling","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_name"]},"policy_type":{"constant_value":"TargetTrackingScaling"},"resource_id":{"references":["aws_appautoscaling_target.ecs_target.resource_id","aws_appautoscaling_target.ecs_target"]},"scalable_dimension":{"references":["aws_appautoscaling_target.ecs_target.scalable_dimension","aws_appautoscaling_target.ecs_target"]},"service_namespace":{"references":["aws_appautoscaling_target.ecs_target.service_namespace","aws_appautoscaling_target.ecs_target"]},"target_tracking_scaling_policy_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"ECSServiceAverageCPUUtilization"}}],"scale_in_cooldown":{"constant_value":300},"scale_out_cooldown":{"constant_value":60},"target_value":{"constant_value":70}}]},"schema_version":0},{"address":"aws_appautoscaling_policy.memory_scaling","mode":"managed","type":"aws_appautoscaling_policy","name":"memory_scaling","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_name"]},"policy_type":{"constant_value":"TargetTrackingScaling"},"resource_id":{"references":["aws_appautoscaling_target.ecs_target.resource_id","aws_appautoscaling_target.ecs_target"]},"scalable_dimension":{"references":["aws_appautoscaling_target.ecs_target.scalable_dimension","aws_appautoscaling_target.ecs_target"]},"service_namespace":{"references":["aws_appautoscaling_target.ecs_target.service_namespace","aws_appautoscaling_target.ecs_target"]},"target_tracking_scaling_policy_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"ECSServiceAverageMemoryUtilization"}}],"scale_in_cooldown":{"constant_value":300},"scale_out_cooldown":{"constant_value":60},"target_value":{"constant_value":80}}]},"schema_version":0},{"address":"aws_appautoscaling_target.ecs_target","mode":"managed","type":"aws_appautoscaling_target","name":"ecs_target","provider_config_key":"aws","expressions":{"max_capacity":{"constant_value":3},"min_capacity":{"constant_value":1},"resource_id":{"references":["aws_ecs_cluster.this.name","aws_ecs_cluster.this","aws_ecs_service.this.name","aws_ecs_service.this"]},"scalable_dimension":{"constant_value":"ecs:service:DesiredCount"},"service_namespace":{"constant_value":"ecs"}},"schema_version":0},{"address":"aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_name"]},"retention_in_days":{"constant_value":30},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_ecs_cluster.this","mode":"managed","type":"aws_ecs_cluster","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_name"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_ecs_service.this","mode":"managed","type":"aws_ecs_service","name":"this","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.this.id","aws_ecs_cluster.this"]},"deployment_controller":[{"type":{"constant_value":"ECS"}}],"deployment_maximum_percent":{"constant_value":200},"deployment_minimum_healthy_percent":{"constant_value":50},"desired_count":{"references":["var.desired_count"]},"launch_type":{"constant_value":"FARGATE"},"load_balancer":[{"container_name":{"constant_value":"api"},"container_port":{"references":["var.container_port"]},"target_group_arn":{"references":["var.alb_target_group"]}}],"name":{"references":["var.cluster_name"]},"network_configuration":[{"assign_public_ip":{"constant_value":false},"security_groups":{"references":["aws_security_group.this.id","aws_security_group.this"]},"subnets":{"references":["var.subnets"]}}],"propagate_tags":{"constant_value":"SERVICE"},"tags":{"references":["var.tags"]},"task_definition":{"references":["aws_ecs_task_definition.this.arn","aws_ecs_task_definition.this"]}},"schema_version":1,"depends_on":["aws_cloudwatch_log_group.this"]},{"address":"aws_ecs_task_definition.this","mode":"managed","type":"aws_ecs_task_definition","name":"this","provider_config_key":"aws","expressions":{"container_definitions":{"references":["var.image","var.container_port","var.container_port","var.docdb_secret_arn","var.documentdb_uri","var.rds_secret_arn","var.rds_endpoint","var.docdb_secret_arn","var.docdb_secret_arn","var.docdb_secret_arn","var.rds_secret_arn","var.rds_secret_arn","var.rds_secret_arn","var.cluster_name","data.aws_region.current.name","data.aws_region.current"]},"cpu":{"constant_value":"512"},"execution_role_arn":{"references":["aws_iam_role.exec.arn","aws_iam_role.exec"]},"family":{"references":["var.cluster_name"]},"memory":{"constant_value":"1024"},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]},"tags":{"references":["var.tags"]},"task_role_arn":{"references":["aws_iam_role.task.arn","aws_iam_role.task"]}},"schema_version":1},{"address":"aws_iam_role.exec","mode":"managed","type":"aws_iam_role","name":"exec","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ecs_task_assume_role.json","data.aws_iam_policy_document.ecs_task_assume_role"]},"name":{"references":["local.execution_role_name"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role.task","mode":"managed","type":"aws_iam_role","name":"task","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ecs_task_assume_role.json","data.aws_iam_policy_document.ecs_task_assume_role"]},"name":{"references":["local.task_role_name"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy.secrets_policy","mode":"managed","type":"aws_iam_role_policy","name":"secrets_policy","provider_config_key":"aws","expressions":{"name":{"references":["local.execution_role_name"]},"policy":{"references":["local.policy_resources"]},"role":{"references":["aws_iam_role.exec.id","aws_iam_role.exec"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.exec_default","mode":"managed","type":"aws_iam_role_policy_attachment","name":"exec_default","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"},"role":{"references":["aws_iam_role.exec.name","aws_iam_role.exec"]}},"schema_version":0},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow inbound traffic from ALB only"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":443},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":1024,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":65535},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"udp","security_groups":null,"self":null,"to_port":53},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":53}]},"ingress":{"references":["var.alb_security_group_id","var.container_port","var.container_port"]},"name":{"references":["var.cluster_name"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"data.aws_iam_policy_document.ecs_task_assume_role","mode":"data","type":"aws_iam_policy_document","name":"ecs_task_assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.logging","mode":"data","type":"aws_iam_policy_document","name":"logging","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"alb_security_group_id":{"description":"Security group ID of the ALB to allow inbound traffic from."},"alb_target_group":{"description":"ARN of the ALB target group to register the ECS service."},"cluster_name":{"description":"Name of the ECS cluster."},"container_port":{"default":8000,"description":"Port on which the application listens inside the container."},"desired_count":{"default":1,"description":"Number of desired ECS tasks."},"docdb_secret_arn":{"default":"","description":"ARN of the DocumentDB credentials secret in Secrets Manager."},"documentdb_uri":{"description":"Connection URI for DocumentDB to inject into the container environment."},"image":{"description":"Docker image to run for the API."},"rds_endpoint":{"description":"PostgreSQL endpoint with port and database name (host:port/dbname)."},"rds_secret_arn":{"default":"","description":"ARN of the RDS credentials secret in Secrets Manager."},"secrets_prefix":{"description":"Prefix used when storing secrets in Secrets Manager. Unused here but reserved for future use."},"subnets":{"description":"List of private subnet IDs for ECS tasks."},"tags":{"default":{},"description":"Tags to apply to ECS resources."},"vpc_cidr":{"description":"VPC CIDR block for DNS resolver access."},"vpc_id":{"description":"VPC ID for ECS networking."}}}},"docdb":{"source":"./modules/documentdb","expressions":{"allowed_security_group_ids":{"references":["local.create_compute","module.compute[0].security_group_id","module.compute[0]"]},"backup_retention_period":{"references":["local.is_prod"]},"cluster_identifier":{"references":["local.name_prefix"]},"deletion_protection":{"references":["local.is_prod"]},"instance_class":{"constant_value":"db.t4g.medium"},"instance_count":{"constant_value":1},"password":{"references":["random_password.docdb.result","random_password.docdb"]},"skip_final_snapshot":{"references":["local.is_prod"]},"subnet_ids":{"references":["module.network.private_subnet_ids","module.network"]},"tags":{"references":["local.base_tags"]},"username":{"constant_value":"admin"},"vpc_id":{"references":["module.network.vpc_id","module.network"]}},"count_expression":{"references":["local.create_docdb"]},"module":{"outputs":{"connection_uri":{"sensitive":true,"expression":{"references":["local.connection_uri"]}},"endpoint":{"expression":{"references":["local.endpoint"]}},"password":{"sensitive":true,"expression":{"references":["local.password"]}},"port":{"expression":{"references":["local.port"]}},"username":{"expression":{"references":["local.username"]}}},"resources":[{"address":"aws_docdb_cluster.this","mode":"managed","type":"aws_docdb_cluster","name":"this","provider_config_key":"aws","expressions":{"apply_immediately":{"constant_value":true},"backup_retention_period":{"references":["var.backup_retention_period"]},"cluster_identifier":{"references":["var.cluster_identifier"]},"db_cluster_parameter_group_name":{"references":["aws_docdb_cluster_parameter_group.this.name","aws_docdb_cluster_parameter_group.this"]},"db_subnet_group_name":{"references":["aws_docdb_subnet_group.this.name","aws_docdb_subnet_group.this"]},"deletion_protection":{"references":["var.deletion_protection"]},"enabled_cloudwatch_logs_exports":{"constant_value":["audit","profiler"]},"engine":{"constant_value":"docdb"},"master_password":{"references":["var.password"]},"master_username":{"references":["var.username"]},"preferred_backup_window":{"constant_value":"02:00-03:00"},"skip_final_snapshot":{"references":["var.skip_final_snapshot"]},"storage_encrypted":{"constant_value":true},"tags":{"references":["var.tags","var.cluster_identifier"]},"vpc_security_group_ids":{"references":["aws_security_group.this.id","aws_security_group.this"]}},"schema_version":0},{"address":"aws_docdb_cluster_instance.this","mode":"managed","type":"aws_docdb_cluster_instance","name":"this","provider_config_key":"aws","expressions":{"apply_immediately":{"constant_value":true},"cluster_identifier":{"references":["aws_docdb_cluster.this.id","aws_docdb_cluster.this"]},"identifier":{"references":["var.cluster_identifier","count.index"]},"instance_class":{"references":["var.instance_class"]},"tags":{"references":["var.tags","var.cluster_identifier","count.index"]}},"schema_version":0,"count_expression":{"references":["var.instance_count"]}},{"address":"aws_docdb_cluster_parameter_group.this","mode":"managed","type":"aws_docdb_cluster_parameter_group","name":"this","provider_config_key":"aws","expressions":{"family":{"constant_value":"docdb5.0"},"name":{"references":["var.cluster_identifier"]},"parameter":[{"name":{"constant_value":"tls"},"value":{"constant_value":"enabled"}}],"tags":{"references":["var.tags","var.cluster_identifier"]}},"schema_version":0},{"address":"aws_docdb_subnet_group.this","mode":"managed","type":"aws_docdb_subnet_group","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_identifier"]},"subnet_ids":{"references":["var.subnet_ids"]},"tags":{"references":["var.tags","var.cluster_identifier"]}},"schema_version":0},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow DocumentDB access from ECS services only"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.allowed_security_group_ids"]},"name":{"references":["var.cluster_identifier"]},"tags":{"references":["var.tags","var.cluster_identifier"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1}],"variables":{"allowed_security_group_ids":{"default":[],"description":"List of security group IDs allowed to access DocumentDB."},"backup_retention_period":{"default":7,"description":"Number of days to retain automated backups."},"cluster_identifier":{"description":"Unique name for the DocumentDB cluster."},"deletion_protection":{"default":true,"description":"Whether to enable deletion protection for the cluster."},"instance_class":{"description":"Instance class for DocumentDB instances (e.g. db.r6g.large)."},"instance_count":{"default":1,"description":"Number of DocumentDB instances to create."},"password":{"description":"Master password for DocumentDB.","sensitive":true},"skip_final_snapshot":{"default":false,"description":"Whether to skip final snapshot on cluster deletion."},"subnet_ids":{"description":"List of private subnet IDs for DocumentDB."},"tags":{"default":{},"description":"Tags to apply to all resources."},"username":{"description":"Master username for DocumentDB."},"vpc_id":{"description":"VPC ID to attach the DocumentDB security group."}}}},"frontend":{"source":"./modules/frontend","expressions":{"acm_certificate_arn":{"references":["var.acm_certificate_arn"]},"bucket_name":{"references":["var.frontend_bucket_name","var.frontend_bucket_name","local.name_prefix","random_string.bucket_suffix.result","random_string.bucket_suffix"]},"domain_name":{"references":["local.frontend_fqdn"]},"tags":{"references":["local.base_tags"]}},"module":{"outputs":{"distribution_id":{"expression":{"references":["aws_cloudfront_distribution.this.id","aws_cloudfront_distribution.this"]},"description":"ID of the CloudFront distribution"},"domain_name":{"expression":{"references":["aws_cloudfront_distribution.this.domain_name","aws_cloudfront_distribution.this"]},"description":"Domain name of the CloudFront distribution"},"s3_bucket":{"expression":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"description":"Name of the S3 bucket"}},"resources":[{"address":"aws_acm_certificate.frontend","mode":"managed","type":"aws_acm_certificate","name":"frontend","provider_config_key":"aws.us_east_1","expressions":{"domain_name":{"references":["var.domain_name"]},"tags":{"references":["var.tags"]},"validation_method":{"constant_value":"DNS"}},"schema_version":0,"count_expression":{"references":["var.acm_certificate_arn"]}},{"address":"aws_acm_certificate_validation.frontend","mode":"managed","type":"aws_acm_certificate_validation","name":"frontend","provider_config_key":"aws.us_east_1","expressions":{"certificate_arn":{"references":["aws_acm_certificate.frontend[0].arn","aws_acm_certificate.frontend[0]","aws_acm_certificate.frontend"]},"validation_record_fqdns":{"references":["aws_route53_record.frontend_cert_validation"]}},"schema_version":0,"count_expression":{"references":["var.acm_certificate_arn"]}},{"address":"aws_cloudfront_distribution.this","mode":"managed","type":"aws_cloudfront_distribution","name":"this","provider_config_key":"aws","expressions":{"aliases":{"references":["var.domain_name"]},"custom_error_response":[{"error_code":{"constant_value":404},"response_code":{"constant_value":200},"response_page_path":{"constant_value":"/index.html"}},{"error_code":{"constant_value":403},"response_code":{"constant_value":200},"response_page_path":{"constant_value":"/index.html"}}],"default_cache_behavior":[{"allowed_methods":{"constant_value":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"]},"cache_policy_id":{"constant_value":"658327ea-f89d-4fab-a63d-7e88639e58f6"},"cached_methods":{"constant_value":["GET","HEAD"]},"compress":{"constant_value":true},"target_origin_id":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"default_root_object":{"constant_value":"index.html"},"enabled":{"constant_value":true},"is_ipv6_enabled":{"constant_value":true},"origin":[{"domain_name":{"references":["aws_s3_bucket.this.bucket_regional_domain_name","aws_s3_bucket.this"]},"origin_access_control_id":{"references":["aws_cloudfront_origin_access_control.this.id","aws_cloudfront_origin_access_control.this"]},"origin_id":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]}}],"restrictions":[{"geo_restriction":[{"restriction_type":{"constant_value":"none"}}]}],"tags":{"references":["var.tags"]},"viewer_certificate":[{"acm_certificate_arn":{"references":["local.frontend_certificate_arn"]},"minimum_protocol_version":{"constant_value":"TLSv1.2_2021"},"ssl_support_method":{"constant_value":"sni-only"}}]},"schema_version":1,"depends_on":["aws_acm_certificate_validation.frontend"]},{"address":"aws_cloudfront_origin_access_control.this","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"this","provider_config_key":"aws","expressions":{"description":{"references":["var.bucket_name"]},"name":{"references":["var.bucket_name"]},"origin_access_control_origin_type":{"constant_value":"s3"},"signing_behavior":{"constant_value":"always"},"signing_protocol":{"constant_value":"sigv4"}},"schema_version":0},{"address":"aws_route53_record.frontend_cert_validation","mode":"managed","type":"aws_route53_record","name":"frontend_cert_validation","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"records":{"references":["each.value.record","each.value"]},"ttl":{"constant_value":300},"type":{"references":["each.value.type","each.value"]},"zone_id":{"references":["data.aws_route53_zone.main.zone_id","data.aws_route53_zone.main"]}},"schema_version":2,"for_each_expression":{"references":["var.acm_certificate_arn","aws_acm_certificate.frontend[0].domain_validation_options","aws_acm_certificate.frontend[0]","aws_acm_certificate.frontend"]}},{"address":"aws_s3_bucket.this","mode":"managed","type":"aws_s3_bucket","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["var.bucket_name"]},"force_destroy":{"constant_value":true},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_s3_bucket_policy.this","mode":"managed","type":"aws_s3_bucket_policy","name":"this","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"policy":{"references":["data.aws_iam_policy_document.s3_policy.json","data.aws_iam_policy_document.s3_policy"]}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.this","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"this","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.this.id","aws_s3_bucket.this"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"data.aws_iam_policy_document.s3_policy","mode":"data","type":"aws_iam_policy_document","name":"s3_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:GetObject"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"references":["aws_cloudfront_distribution.this.arn","aws_cloudfront_distribution.this"]},"variable":{"constant_value":"AWS:SourceArn"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["cloudfront.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.this.arn","aws_s3_bucket.this"]},"sid":{"constant_value":"AllowCloudFrontServicePrincipal"}}]},"schema_version":0},{"address":"data.aws_route53_zone.main","mode":"data","type":"aws_route53_zone","name":"main","provider_config_key":"aws","expressions":{"name":{"references":["var.domain_name","var.domain_name"]},"private_zone":{"constant_value":false}},"schema_version":0}],"variables":{"acm_certificate_arn":{"default":null,"description":"Optional ACM certificate ARN for TLS termination at CloudFront. If not provided, the website is served via HTTP on S3."},"bucket_name":{"description":"Name of the S3 bucket for hosting the frontend."},"domain_name":{"description":"Fully qualified domain name for the frontend (e.g. acme.hicaliber.net)."},"tags":{"default":{},"description":"Tags to apply to frontend resources."}}}},"network":{"source":"./modules/network","expressions":{"az_count":{"constant_value":2},"create_vpc":{"references":["local.create_new_vpc"]},"enable_endpoints":{"constant_value":true},"private_subnet_cidrs":{"references":["random_integer.cidr.result","random_integer.cidr","random_integer.cidr.result","random_integer.cidr"]},"public_subnet_cidrs":{"references":["random_integer.cidr.result","random_integer.cidr","random_integer.cidr.result","random_integer.cidr"]},"single_nat_gateway":{"constant_value":true},"tags":{"references":["local.base_tags"]},"vpc_cidr":{"references":["random_integer.cidr.result","random_integer.cidr"]},"vpc_name":{"references":["local.name_prefix"]}},"module":{"outputs":{"nat_gateway_ids":{"expression":{"references":["var.create_vpc","aws_nat_gateway.nat"]}},"private_subnet_ids":{"expression":{"references":["var.create_vpc","aws_subnet.private","data.aws_subnets.private[0].ids","data.aws_subnets.private[0]","data.aws_subnets.private"]}},"public_subnet_ids":{"expression":{"references":["var.create_vpc","aws_subnet.public","data.aws_subnets.public[0].ids","data.aws_subnets.public[0]","data.aws_subnets.public"]}},"vpc_cidr":{"expression":{"references":["local.vpc_cidr"]}},"vpc_id":{"expression":{"references":["local.vpc_id"]}}},"resources":[{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["var.tags","var.vpc_name","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.single_nat_gateway","var.create_vpc","var.single_nat_gateway","var.az_count"]}},{"address":"aws_internet_gateway.igw","mode":"managed","type":"aws_internet_gateway","name":"igw","provider_config_key":"aws","expressions":{"tags":{"references":["var.tags","var.vpc_name"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_nat_gateway.nat","mode":"managed","type":"aws_nat_gateway","name":"nat","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat","count.index"]},"subnet_id":{"references":["aws_subnet.public","var.single_nat_gateway","count.index"]},"tags":{"references":["var.tags","var.vpc_name","count.index"]}},"schema_version":0,"count_expression":{"references":["aws_eip.nat"]},"depends_on":["aws_internet_gateway.igw"]},{"address":"aws_route.private_nat","mode":"managed","type":"aws_route","name":"private_nat","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.nat","var.single_nat_gateway","count.index"]},"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.single_nat_gateway","var.az_count","var.az_count"]}},{"address":"aws_route.public_internet","mode":"managed","type":"aws_route","name":"public_internet","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.igw[0].id","aws_internet_gateway.igw[0]","aws_internet_gateway.igw"]},"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"aws","expressions":{"tags":{"references":["var.tags","var.vpc_name","count.index"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.single_nat_gateway","var.az_count"]}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"tags":{"references":["var.tags","var.vpc_name"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","aws_subnet.public"]}},{"address":"aws_security_group.endpoints","mode":"managed","type":"aws_security_group","name":"endpoints","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for VPC interface endpoints"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["local.vpc_cidr"]},"name":{"references":["var.vpc_name"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.enable_endpoints"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"availability_zone":{"references":["local.azs","count.index"]},"cidr_block":{"references":["var.private_subnet_cidrs","count.index"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.tags","var.vpc_name","count.index"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"availability_zone":{"references":["local.azs","count.index"]},"cidr_block":{"references":["var.public_subnet_cidrs","count.index"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.tags","var.vpc_name","count.index"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["var.tags","var.vpc_name"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_vpc_endpoint.interface","mode":"managed","type":"aws_vpc_endpoint","name":"interface","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.endpoints[0].id","aws_security_group.endpoints[0]","aws_security_group.endpoints"]},"service_name":{"references":["data.aws_region.current.name","data.aws_region.current","local.interface_services","count.index"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["var.tags","var.vpc_name","local.interface_services","count.index"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_endpoints","local.interface_services"]}},{"address":"aws_vpc_endpoint.s3","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_config_key":"aws","expressions":{"route_table_ids":{"references":["aws_route_table.private"]},"service_name":{"references":["data.aws_region.current.name","data.aws_region.current"]},"tags":{"references":["var.tags","var.vpc_name"]},"vpc_endpoint_type":{"constant_value":"Gateway"},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_endpoints"]}},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_subnets.private","mode":"data","type":"aws_subnets","name":"private","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"tag:Tier"},"values":{"constant_value":["private"]}},{"name":{"constant_value":"vpc-id"},"values":{"references":["local.vpc_id"]}}]},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"data.aws_subnets.public","mode":"data","type":"aws_subnets","name":"public","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"tag:Tier"},"values":{"constant_value":["public"]}},{"name":{"constant_value":"vpc-id"},"values":{"references":["local.vpc_id"]}}]},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"data.aws_vpc.shared","mode":"data","type":"aws_vpc","name":"shared","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"tag:Client"},"values":{"references":["var.tags[\"Client\"]","var.tags"]}},{"name":{"constant_value":"tag:Plan"},"values":{"constant_value":["SaaS"]}},{"name":{"constant_value":"tag:Env"},"values":{"references":["var.tags[\"Env\"]","var.tags"]}}]},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}}],"variables":{"az_count":{"default":2,"description":"Number of availability zones to spread subnets across."},"create_vpc":{"description":"Whether to create a new VPC or reuse an existing one."},"enable_endpoints":{"default":true,"description":"Whether to create VPC endpoints for S3, ECR, CloudWatch Logs and Secrets Manager."},"private_subnet_cidrs":{"description":"List of CIDR blocks for private subnets. Must match az_count in length."},"public_subnet_cidrs":{"description":"List of CIDR blocks for public subnets. Must match az_count in length."},"single_nat_gateway":{"default":true,"description":"If true, create a single NAT gateway in the first public subnet to reduce cost. Otherwise one per AZ."},"tags":{"default":{},"description":"Tags to apply to resources."},"vpc_cidr":{"description":"CIDR block for the VPC."},"vpc_name":{"description":"Name prefix for the VPC."}}}},"rds":{"source":"./modules/rds","expressions":{"allocated_storage":{"constant_value":20},"allowed_security_group_ids":{"references":["local.create_compute","module.compute[0].security_group_id","module.compute[0]"]},"backup_retention":{"references":["local.is_prod"]},"db_name":{"references":["local.client_lower"]},"deletion_protection":{"references":["local.is_prod"]},"engine_version":{"constant_value":"15.4"},"identifier":{"references":["local.name_prefix"]},"instance_class":{"constant_value":"db.t4g.small"},"multi_az":{"constant_value":false},"password":{"references":["random_password.rds.result","random_password.rds"]},"skip_final_snapshot":{"references":["local.is_prod"]},"subnet_ids":{"references":["module.network.private_subnet_ids","module.network"]},"tags":{"references":["local.base_tags"]},"username":{"constant_value":"admin"},"vpc_id":{"references":["module.network.vpc_id","module.network"]}},"count_expression":{"references":["local.create_rds"]},"module":{"outputs":{"endpoint":{"expression":{"references":["aws_db_instance.this.address","aws_db_instance.this","aws_db_instance.this.port","aws_db_instance.this","var.db_name"]}},"password":{"sensitive":true,"expression":{"references":["var.password"]}},"username":{"expression":{"references":["var.username"]}}},"resources":[{"address":"aws_db_instance.this","mode":"managed","type":"aws_db_instance","name":"this","provider_config_key":"aws","expressions":{"allocated_storage":{"references":["var.allocated_storage"]},"apply_immediately":{"constant_value":true},"auto_minor_version_upgrade":{"constant_value":true},"backup_retention_period":{"references":["var.backup_retention"]},"db_name":{"references":["var.db_name"]},"db_subnet_group_name":{"references":["aws_db_subnet_group.this.name","aws_db_subnet_group.this"]},"deletion_protection":{"references":["var.deletion_protection"]},"engine":{"constant_value":"postgres"},"engine_version":{"references":["var.engine_version"]},"identifier":{"references":["var.identifier"]},"instance_class":{"references":["var.instance_class"]},"multi_az":{"references":["var.multi_az"]},"password":{"references":["var.password"]},"publicly_accessible":{"constant_value":false},"skip_final_snapshot":{"references":["var.skip_final_snapshot"]},"storage_encrypted":{"constant_value":true},"tags":{"references":["var.tags","var.identifier"]},"username":{"references":["var.username"]},"vpc_security_group_ids":{"references":["aws_security_group.this.id","aws_security_group.this"]}},"schema_version":2},{"address":"aws_db_subnet_group.this","mode":"managed","type":"aws_db_subnet_group","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.identifier"]},"subnet_ids":{"references":["var.subnet_ids"]},"tags":{"references":["var.tags","var.identifier"]}},"schema_version":0},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow Postgres access from ECS services only"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.allowed_security_group_ids"]},"name":{"references":["var.identifier"]},"tags":{"references":["var.tags","var.identifier"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1}],"variables":{"allocated_storage":{"description":"Initial allocated storage in GB."},"allowed_security_group_ids":{"default":[],"description":"List of security group IDs allowed to access RDS."},"backup_retention":{"default":7,"description":"Number of days to retain automated backups."},"db_name":{"description":"Name of the PostgreSQL database to create."},"deletion_protection":{"default":true,"description":"Whether to enable deletion protection for the database."},"engine_version":{"description":"PostgreSQL engine version (e.g. 15.4)."},"identifier":{"description":"Identifier for the PostgreSQL instance."},"instance_class":{"description":"Instance class for the RDS instance."},"multi_az":{"default":false,"description":"Whether to deploy a standby in another AZ for high availability."},"password":{"description":"Master password for PostgreSQL.","sensitive":true},"skip_final_snapshot":{"default":false,"description":"Whether to skip final snapshot on database deletion."},"subnet_ids":{"description":"List of private subnet IDs for RDS."},"tags":{"default":{},"description":"Tags to apply to all RDS resources."},"username":{"description":"Master user name for PostgreSQL."},"vpc_id":{"description":"VPC ID for the RDS security group."}}}}},"variables":{"acm_certificate_arn":{"default":null,"description":"ARN of an ACM certificate for the domain, if TLS termination at the ALB or CloudFront is desired."},"api_container_image":{"default":"123456789012.dkr.ecr.us-east-1.amazonaws.com/caliber-api@sha256:abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890","description":"Docker image for the Django API container. Must use ECR format with digest pinning: \u003caccount\u003e.dkr.ecr.\u003cregion\u003e.amazonaws.com/\u003crepo\u003e@sha256:\u003cdigest\u003e"},"aws_region":{"default":"us-east-1","description":"AWS region to deploy into."},"client_name":{"description":"Single-word CamelCase name of the client (e.g. APSInsurance, Acme, AcmeCorp). Use 'SaaSShared' when provisioning shared SaaS infrastructure."},"env":{"description":"Environment name (e.g. stg or prod)."},"frontend_bucket_name":{"default":null,"description":"Optional override for the S3 bucket used to host the React frontend. If not specified it will be derived from the client and environment."},"plan":{"description":"Deployment plan: 'SaaS' for shared multi‑tenant deployments or 'Dedicated' for isolated per‑client stacks."},"saas_api_lb_dns_name":{"default":null,"description":"For SaaS tenants, provide the DNS name of the shared API load balancer."},"saas_api_lb_zone_id":{"default":null,"description":"For SaaS tenants, provide the Route53 zone ID of the shared API load balancer."},"saas_documentdb_uri":{"default":null,"description":"For SaaS tenants, provide the connection string URI of the shared Amazon DocumentDB cluster (including required parameters)."},"saas_rds_endpoint":{"default":null,"description":"For SaaS tenants, provide the endpoint of the shared PostgreSQL RDS instance in the format host:port/dbname."},"subdomain":{"description":"Subdomain for the client (e.g. acme for acme.hicaliber.net). For SaaS this could be 'saas-customer' or 'demo'."},"tags":{"default":{},"description":"Global tags applied to every resource."}}}},"relevant_attributes":[{"resource":"module.alb[0].aws_security_group.this","attribute":["id"]},{"resource":"module.frontend.aws_s3_bucket.this","attribute":["id"]},{"resource":"module.rds[0].aws_db_instance.this","attribute":["address"]},{"resource":"module.compute[0].aws_ecs_cluster.this","attribute":["id"]},{"resource":"module.alb[0].aws_acm_certificate.this[0]","attribute":["arn"]},{"resource":"module.compute[0].aws_ecs_service.this","attribute":["name"]},{"resource":"module.network.aws_route_table.private","attribute":[]},{"resource":"random_string.bucket_suffix","attribute":["result"]},{"resource":"module.rds[0].aws_db_instance.this","attribute":["port"]},{"resource":"module.alb[0].aws_lb_target_group.this","attribute":["arn"]},{"resource":"module.compute[0].aws_appautoscaling_target.ecs_target","attribute":["resource_id"]},{"resource":"module.docdb[0].aws_docdb_subnet_group.this","attribute":["name"]},{"resource":"module.compute[0].aws_ecs_cluster.this","attribute":["name"]},{"resource":"module.network.aws_subnet.private","attribute":[]},{"resource":"aws_secretsmanager_secret.docdb","attribute":["arn"]},{"resource":"module.alb[0].aws_lb.this","attribute":["dns_name"]},{"resource":"module.frontend.data.aws_iam_policy_document.s3_policy","attribute":["json"]},{"resource":"module.frontend.aws_s3_bucket.this","attribute":["bucket_regional_domain_name"]},{"resource":"module.compute[0].aws_iam_role.exec","attribute":["arn"]},{"resource":"aws_secretsmanager_secret.rds","attribute":["id"]},{"resource":"module.frontend.aws_cloudfront_distribution.this","attribute":["domain_name"]},{"resource":"module.docdb[0].aws_docdb_cluster.this","attribute":["id"]},{"resource":"module.docdb[0].aws_docdb_cluster_parameter_group.this","attribute":["name"]},{"resource":"module.compute[0].aws_security_group.this","attribute":["id"]},{"resource":"module.frontend.aws_s3_bucket.this","attribute":["arn"]},{"resource":"module.network.data.aws_vpc.shared[0]","attribute":["cidr_block"]},{"resource":"module.compute[0].aws_iam_role.exec","attribute":["id"]},{"resource":"module.network.aws_vpc.this[0]","attribute":["id"]},{"resource":"module.network.aws_internet_gateway.igw[0]","attribute":["id"]},{"resource":"random_password.docdb","attribute":["result"]},{"resource":"module.network.aws_security_group.endpoints[0]","attribute":["id"]},{"resource":"aws_secretsmanager_secret.docdb","attribute":["id"]},{"resource":"module.compute[0].aws_appautoscaling_target.ecs_target","attribute":["service_namespace"]},{"resource":"module.network.aws_nat_gateway.nat","attribute":[]},{"resource":"module.frontend.data.aws_route53_zone.main","attribute":["zone_id"]},{"resource":"module.frontend.aws_cloudfront_origin_access_control.this","attribute":["id"]},{"resource":"aws_secretsmanager_secret.rds","attribute":["arn"]},{"resource":"module.network.data.aws_vpc.shared[0]","attribute":["id"]},{"resource":"module.compute[0].data.aws_iam_policy_document.ecs_task_assume_role","attribute":["json"]},{"resource":"module.alb[0].aws_lb.this","attribute":["zone_id"]},{"resource":"module.alb[0].aws_route53_record.cert_validation","attribute":[]},{"resource":"random_password.rds","attribute":["result"]},{"resource":"module.alb[0].aws_acm_certificate.this[0]","attribute":["domain_validation_options"]},{"resource":"module.network.data.aws_subnets.public[0]","attribute":["ids"]},{"resource":"module.compute[0].aws_appautoscaling_target.ecs_target","attribute":["scalable_dimension"]},{"resource":"module.compute[0].aws_ecs_task_definition.this","attribute":["arn"]},{"resource":"module.network.aws_route_table.public[0]","attribute":["id"]},{"resource":"module.frontend.aws_acm_certificate.frontend[0]","attribute":["arn"]},{"resource":"module.frontend.aws_route53_record.frontend_cert_validation","attribute":[]},{"resource":"module.network.aws_subnet.public","attribute":[]},{"resource":"module.network.data.aws_region.current","attribute":["name"]},{"resource":"module.alb[0].aws_lb.this","attribute":["arn"]},{"resource":"module.network.aws_eip.nat","attribute":[]},{"resource":"module.compute[0].data.aws_region.current","attribute":["name"]},{"resource":"module.compute[0].aws_iam_role.task","attribute":["arn"]},{"resource":"module.docdb[0].aws_docdb_cluster.this","attribute":["endpoint"]},{"resource":"module.docdb[0].aws_security_group.this","attribute":["id"]},{"resource":"module.compute[0].aws_iam_role.exec","attribute":["name"]},{"resource":"module.network.data.aws_availability_zones.available","attribute":["names"]},{"resource":"module.docdb[0].aws_docdb_cluster.this","attribute":["port"]},{"resource":"module.frontend.aws_acm_certificate.frontend[0]","attribute":["domain_validation_options"]},{"resource":"data.aws_route53_zone.primary","attribute":["zone_id"]},{"resource":"module.rds[0].aws_security_group.this","attribute":["id"]},{"resource":"module.alb[0].data.aws_route53_zone.main","attribute":["zone_id"]},{"resource":"module.frontend.aws_cloudfront_distribution.this","attribute":["id"]},{"resource":"module.network.data.aws_subnets.private[0]","attribute":["ids"]},{"resource":"random_integer.cidr","attribute":["result"]},{"resource":"module.frontend.aws_cloudfront_distribution.this","attribute":["arn"]},{"resource":"module.rds[0].aws_db_subnet_group.this","attribute":["name"]}],"checks":[{"address":{"kind":"var","name":"api_container_image","to_display":"var.api_container_image"},"status":"pass","instances":[{"address":{"to_display":"var.api_container_image"},"status":"pass"}]},{"address":{"kind":"var","name":"env","to_display":"var.env"},"status":"pass","instances":[{"address":{"to_display":"var.env"},"status":"pass"}]},{"address":{"kind":"var","name":"plan","to_display":"var.plan"},"status":"pass","instances":[{"address":{"to_display":"var.plan"},"status":"pass"}]}],"timestamp":"2025-09-08T16:23:43Z","applyable":true,"complete":true,"errored":false}
